"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = __importDefault(require("express"));
const socialAuthController_js_1 = require("../controllers/socialAuthController.js");
const authMiddleware_js_1 = require("../utils/middleware/authMiddleware.js");
const socialMediaService_js_1 = require("../services/socialMediaService.js");
const socialAccount_repository_js_1 = require("../repositories/socialAccount.repository.js");
const user_repository_js_1 = require("../repositories/user.repository.js");
const socialPost_repository_js_1 = require("../repositories/socialPost.repository.js");
const postLIke_repository_js_1 = require("../repositories/postLIke.repository.js");
const userService_js_1 = require("../services/userService.js");
const reportService_js_1 = require("../services/reportService.js");
const report_repository_js_1 = require("../repositories/report.repository.js");
const router = express_1.default.Router();
const socialMediaRepository = new socialAccount_repository_js_1.SocialAccountRepository();
const socialPostRepository = new socialPost_repository_js_1.SocialPostRepository();
const userRepository = new user_repository_js_1.UserRepository();
const postlikeRepository = new postLIke_repository_js_1.PostLikeRepository();
const socialMediaService = new socialMediaService_js_1.SocialAccountService(socialMediaRepository, socialPostRepository, userRepository, postlikeRepository);
const userService = new userService_js_1.UserService(userRepository);
const reportRepository = new report_repository_js_1.ReportedPostRepository();
const reportService = new reportService_js_1.ReportService(reportRepository);
const authSocialcontroller = new socialAuthController_js_1.SocialAuthController(socialMediaService, userService, reportService);
router.post('/reddit/token', authMiddleware_js_1.authenticateToken, authSocialcontroller.getRedditAccessToken.bind(authSocialcontroller));
router.post('/reddit/post', authMiddleware_js_1.authenticateToken, authSocialcontroller.addRedditPost.bind(authSocialcontroller));
router.post('/feed/toggle-like', authMiddleware_js_1.authenticateToken, authSocialcontroller.toggleLike.bind(authSocialcontroller));
router.post('/feed/save', authMiddleware_js_1.authenticateToken, authSocialcontroller.savePost.bind(authSocialcontroller));
router.post('/feed/report', authMiddleware_js_1.authenticateToken, authSocialcontroller.submitReport.bind(authSocialcontroller));
router.get('/feed/saved', authMiddleware_js_1.authenticateToken, authSocialcontroller.fetchSavedPosts.bind(authSocialcontroller));
router.get('/feed', authMiddleware_js_1.authenticateToken, authSocialcontroller.getFeed.bind(authSocialcontroller));
router.get('/feed/:id', authMiddleware_js_1.authenticateToken, authSocialcontroller.fetchPostById.bind(authSocialcontroller));
router.get('/reports', authMiddleware_js_1.adminAuthenticateToken, authSocialcontroller.fetchReports.bind(authSocialcontroller));
exports.default = router;
